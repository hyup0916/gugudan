<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구구단 계산기</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>구구단 계산기</h1>
        <p>숫자를 입력하고 '계산하기' 버튼을 누르세요.</p>
        <div class="input-group">
            <input type="number" id="numberInput" placeholder="1 ~ 9 사이의 숫자">
            <button id="calculateBtn">계산하기</button>
        </div>
        <div id="result"></div>
    </div>

    <script>
        const numberInput = document.getElementById('numberInput');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultDiv = document.getElementById('result');

        calculateBtn.addEventListener('click', async () => {
            const number = numberInput.value;
            if (!number || number < 1 || number > 9) {
                alert('1 ~ 9 사이의 유효한 숫자를 입력해주세요.');
                return;
            }

            // Vercel 서버리스 함수 호출
            try {
                const response = await fetch(`/api/gugudan?x=${number}`);
                if (!response.ok) {
                    throw new Error('서버 오류 발생');
                }
                const data = await response.json();

                // 결과 화면에 표시
                resultDiv.innerHTML = `<h2>${number}단</h2>` + data.result.map(item => `<p>${item}</p>`).join('');
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">${error.message}</p>`;
            }
        });
    </script>
</body>
</html>